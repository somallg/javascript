<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>8.3 Using timer to break up a long-running task</title>
    <link rel="stylesheet" href="../../css/style.css"/>
</head>
<body>
    <table>
        <tbody></tbody>
    </table>
    <div id="results"></div>
    <script src="../../js/assert.js"></script>
    <script type="text/javascript">

        var rowCount = 20000;
        var divideInfo = 4;
        var chunkSize = rowCount/divideInfo;
        var iteration = 0;

        var table = document.getElementsByTagName('tbody')[0];

        setTimeout(function generateRows() {
            var base = (chunkSize) * iteration;
            for (var i = 0; i < chunkSize; i++) {
                var tr = document.createElement('tr');
                for (var t = 0; t < 6; t++) {
                    var td = document.createElement('td');
                    td.appendChild(document.createTextNode((i + base) + ',' + t + ',' + iteration));
                    tr.appendChild(td);
                }
                table.appendChild(tr);
            }
            iteration++;
            if (iteration < divideInfo) {
                setTimeout(generateRows, 0);
            }
        }, 0);

	</script>
</body>
</html>
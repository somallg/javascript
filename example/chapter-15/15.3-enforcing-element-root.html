<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>15.3 Enforcing element root</title>
    <link rel="stylesheet" href="../../css/style.css"/>
</head>
<body>
    <div id="test">
        <b>Hello</b>, I'm a ninja!
    </div>
    <div id="test2"></div>

    <div id="results"></div>
    <script src="../../js/assert.js"></script>
    <script type="text/javascript">

        (function() {
            var count = 1;

            this.rootedQuerySelectorAll = function(elem, query) {
                var oldId = elem.id;
                elem.id = "rooted" + (count++);

                try {
                    return elem.querySelectorAll('#' + elem.id + ' ' + query);
                } catch (e) {
                    throw e;
                } finally {
                    elem.id = oldId;
                }
            }
        })();

        window.onload = function() {
            var b = rootedQuerySelectorAll(document.getElementById('test'), 'div b');

            assert(b.length === 0, 'The selector is now rooted properly');

        }


	</script>
</body>
</html>
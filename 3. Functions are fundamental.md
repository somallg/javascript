# 3. Functions are fundamental
* JavaScript is a *functional language*
* Functions are *first-class objects*

## 3.1 What's with the functional difference?

### 3.1.1 Why is JavaScript's functional nature important?
* Function is the primary modular unit of execution
* Because most of our code will run as the result of a function invocation, having functions that are versatile and powerful constructs will give us a great deal of flexibility and sway when writing code

* Functions as first-class objects
* Objects in JavaScript enjoy certain capabilities
    * Can be created via literals
    * Can be assigned to variables, array entries, and properties of other objects
    * Can be passed as arguments to functions
    * Can be returned as values from functions
    * Can posses properties that can be dynamically created and assigned
* Functions in JavaScript possess all of those capabilities and are thus treated like any other object in the language    

* The browser event loop
* Because events happen at unpredictable times and in an unpredictable order, handling of the events, and the invocation of their handling functions, is *asynchronous*

* The callback concept
* Whenever we set up a function to be called at a later time, whether by the browser or other code, we're setting up that is termed a *callback*

### 3.1.2 Sorting with a comparator
```
var values = [ 213, 16, 2058, 54, 10, 1965, 57, 9 ];
values.sort(function(value1, value2) { return value2 - value1; });
```
* The functional difference in JavaScript allows use to create a function as a standalone entity
* One of the most important features of JavaScript is the ability to create functions anywhere in the code where an expression can appear
* In addition to makeing the code more compact and easy to understand, the feature can eliminate the need to pollute the global namespace with unnecessary names when a function isn't going to be referenced from multiple places within the code

## 3.2 Declarations
* JavaScript functions are declared using a *function literal*
* Function literals are composed of 4 parts
    * The `function` keyword
    * An *optional* name, if specified, must be a valid JavaScript identifier
    * a comma-separated list of parameter names enclosed in parentheses
    * The body of the function    
    
### 3.2.1 Scoping and functions
* In JavaScript, scopes are declared by *functions*, and not by blocks
* Some nuances to the scoping rules
    * Variable declarations are in scope from their point of declaration to the end of the function within which they're declared, regardless of block nesting
    * Named functions are in scope within the entire function within which they're declared, regardless of block nesting
    * For the purposes of declaration scopes, the global context acts like one big function encompassing the code on the page

## 3.3 Invocations
* The manner in which a function is invoked has a huge impact on how the code within it operates, primarily in how the `this` parameter is established
* 4 different ways to invoke a function
    * As a function
    * As a method
    * As a constructor
    * Via its `apply()` or `call()` methods
* The function invocation operator is a set of parentheses following any expression that evaluates to a function reference
* Any arguments to be passed to the function are included inside the parentheses as a comma-separated list

### 3.3.1 From arguments to function parameters
* If more arguments are supplied than there are parameters, the "excess" arguments are simply not assigned to parameter names
* If there are more parameters than there are arguments, the parameters that have no corresponding argument are set to `undefined`
* All function invocations are also passed two implicit parameters: `argument` and `this`


* The arguments parameter
* The `arguments` parameter is a collection of all the arguments passed to the function
* The collection has a property named `length` that contains the count of arguments, and individual argument values can be obtained using array indexing notation
* It's *not*  a JavaScript array

* The "this" parameter
* The `this` parameter refers to an object that's implicitly associated with the function invocation and is termed the *function context*
* What `this` parameter point to isn't, defined by how the function is declared, but by how its *invoked*

### 3.3.2 Invocation as a function
* Occurs when a function is invoked using the () operator, and the expression to which the () is applied doesn't reference the function as a property of an object
* When invoked in this manner, the function context is the global context - the `window` object

### 3.3.2 Invocation as a function
* When a function is assigned to a property of an object *and* the invocation occurs by referencing the function using that property, then the function is invoked as a *method* of that object
* The object becomes the function context and is available within the function via the `this` parameter
* Even though the *same* function is used throughout, the function context for each invocation of the function changes depending upon how the function is *invoked*, rather than on how it was declared

### 3.3.4 Invocation as a constructor
* To invoke the function *as a constructor*, we precede the function invocation with the `new` keyword

* The superpowers of constructors
* When a constructor is invoked, the following special actions take place
    * A new empty object is created
    * This object is passed to the constructor as the `this` parameter
    * In absence of any explicit return value, the new object is returned
    
* Coding considerations for constructors
* Constructors are named as a noun that describes the object that's being constructed

### 3.3.5 Invocation with apply() and call() methods
* Using the apply and call() methods
* To invoke a function using its `apply()` method, we pass 2 parameters to `apply()`: the object to be used as the function context, and an array of values to be used as the invocation arguments

* Forcing the function context in callbacks

* Which to use?
* Whichever one improves code clarity
* Use the one that best matches the arguments we have handy

## 3.4 Summary
* JavaScript is a functional language
* Functions are first-class objects
* Function can be invoked
* Function are created via literals, for which a name is optional
* The scope of declaration within a function differs from that of most other languages
* The parameter list of a function and its actual argument list can be of different lengths
* Each function invocation is passed 2 implicit parameters
* Function can be invoked in various ways, and the invocation mechanism determines the function context value